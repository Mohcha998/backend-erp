name: Notify Discord

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send Discord notification
        run: |
          if [ "${{ github.event_name }}" = "push" ]; then
            MESSAGE="ğŸš€ **Push to master**\nğŸ“ Commit: ${{ github.event.head_commit.message }}\nğŸ‘¤ By: ${{ github.actor }}"
          else
            MESSAGE="ğŸ”µ **Pull Request**\nğŸ“Œ Title: ${{ github.event.pull_request.title }}\nğŸ‘¤ By: ${{ github.actor }}"
          fi

          curl -X POST \
            -H "Content-Type: application/json" \
            -d "{\"content\":\"$MESSAGE\"}" \
            ${{ secrets.DISCORD_WEBHOOK }}
